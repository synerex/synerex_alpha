(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{125:function(e,t){},128:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(86),s=n.n(o),r=(n(98),n(5)),c=n(6),l=n(17),u=n(14),h=n(16),p=n(46),m=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("header",{className:"main-header"},i.a.createElement("a",{href:"",className:"logo"},i.a.createElement("span",{className:"logo-mini"},i.a.createElement("b",null,"Map")),i.a.createElement("span",{className:"logo-lg"},i.a.createElement("b",null,"Map"),"Provider")),i.a.createElement("nav",{className:"navbar navbar-static-top"},i.a.createElement("a",{href:"",className:"sidebar-toggle","data-toggle":"push-menu",role:"button"},i.a.createElement("span",{className:"sr-only"},"Toggle navigation"))))}}]),t}(a.Component),f=function(e){function t(e){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("aside",{className:"main-sidebar"},i.a.createElement("section",{className:"sidebar"},i.a.createElement("form",{action:"#",method:"get",className:"sidebar-form"},i.a.createElement("div",{className:"input-group"},i.a.createElement("input",{type:"text",name:"q",className:"form-control",placeholder:"Filter..."}),i.a.createElement("span",{className:"input-group-btn"},i.a.createElement("button",{type:"submit",name:"search",id:"search-btn",className:"btn btn-flat"},i.a.createElement("i",{className:"fa fa-search"}))))),i.a.createElement("ul",{className:"sidebar-menu","data-widget":"tree"},i.a.createElement("li",{className:"header"},"Controls"),i.a.createElement("li",null,i.a.createElement("a",{href:"#",onClick:function(){e.props.resetView()}},i.a.createElement("i",{className:"fa fa-th"})," ",i.a.createElement("span",null,"Reset View"),i.a.createElement("span",{className:"pull-right-container"}))),i.a.createElement("li",null,i.a.createElement("a",{href:"#",onClick:function(){e.props.showBus()}},i.a.createElement("i",{className:"fa fa-th"})," ",i.a.createElement("span",null,"Show Bus"),i.a.createElement("span",{className:"pull-right-container"}))),i.a.createElement("li",null,i.a.createElement("a",{href:"#",onClick:function(){e.props.showBusTrace()}},i.a.createElement("i",{className:"fa fa-th"})," ",i.a.createElement("span",null,"Show Bus Trace"),i.a.createElement("span",{className:"pull-right-container"}))),i.a.createElement("li",null,i.a.createElement("a",{href:"#",onClick:function(){e.props.showTaxi()}},i.a.createElement("i",{className:"fa fa-th"})," ",i.a.createElement("span",null,"Show Taxi"),i.a.createElement("span",{className:"pull-right-container"}))),i.a.createElement("li",null,i.a.createElement("a",{href:"#",onClick:function(){e.props.showTrain()}},i.a.createElement("i",{className:"fa fa-th"})," ",i.a.createElement("span",null,"Show Train"),i.a.createElement("span",{className:"pull-right-container"}))))))}}]),t}(a.Component),g=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={component:n.props.component,args:n.props.args},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"render",value:function(){return i.a.createElement("div",{className:"content-wrapper"},i.a.createElement(this.state.component,this.state.args,""))}}]),t}(a.Component),b=function(){function e(){Object(r.a)(this,e),console.log("New Message Store"),this.clear()}return Object(c.a)(e,[{key:"clear",value:function(){this.bus={},this.taxi={},this.train={},this.busTrace={}}},{key:"addVehicle",value:function(e,t){void 0===e[t.id]&&(e[t.id]=[]),e[t.id].length>1e3&&e[t.id].pop(),e[t.id].unshift([t.lat,t.lon,t.angle,t.speed])}},{key:"addPosition",value:function(e){var t=JSON.parse(e);0==t.mtype?this.addVehicle(this.taxi,t):3==t.mtype?this.addVehicle(this.bus,t):2==t.mtype&&this.addVehicle(this.train,t)}},{key:"getVehicle",value:function(e){return 0===e?this.taxi:3==e?this.bus:2==e?this.train:void 0}}]),e}(),d=n(1),v=n.n(d),E=n(130),O=n(129),y=n(131),k=n(91),w=n(20),A=n(85);!function(){var e=d.Marker.prototype._initIcon,t=d.Marker.prototype._setPos,n="msTransform"===d.DomUtil.TRANSFORM;d.Marker.addInitHook(function(){var e=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;e&&(e=e[0]+"px "+e[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||e||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",function(e){e.target._applyRotation()})}),d.Marker.include({_initIcon:function(){e.call(this)},_setPos:function(e){t.call(this,e),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[d.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,n?this._icon.style[d.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[d.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(e){return this.options.rotationAngle=e,this.update(),this},setRotationOrigin:function(e){return this.options.rotationOrigin=e,this.update(),this}})}();var j=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"createLeafletElement",value:function(e){var t=new d.Marker(e.position,this.getOptions(e));return this.contextValue=Object(k.a)({},e.leaflet,{popupContainer:t}),t}},{key:"updateLeafletElement",value:function(e,t){t.position!==e.position&&this.leafletElement.setLatLng(t.position),t.icon!==e.icon&&this.leafletElement.setIcon(t.icon),t.zIndexOffset!==e.zIndexOffset&&this.leafletElement.setZIndexOffset(t.zIndexOffset),t.opacity!==e.opacity&&this.leafletElement.setOpacity(t.opacity),t.draggable!==e.draggable&&(!0===t.draggable?this.leafletElement.dragging.enable():this.leafletElement.dragging.disable()),t.rotationAngle!==e.rotationAngle&&this.leafletElement.setRotationAngle(t.rotationAngle),t.rotationOrigin!==e.rotationOrigin&&this.leafletElement.setRotationOrigin(t.rotationOrigin)}},{key:"render",value:function(){var e=this.props.children;return null==e||null==this.contextValue?null:i.a.createElement(w.a,{value:this.contextValue},e)}}]),t}(A.a),N=Object(w.b)(j),x=(v.a.icon({iconUrl:"img/car_above.png",iconSize:[16,32],iconAnchor:[8,16]}),v.a.icon({iconUrl:"img/car_above.png",iconSize:[32,64],iconAnchor:[16,32]})),S=(v.a.icon({iconUrl:"img/car_above.png",iconSize:[64,128],iconAnchor:[32,64]}),v.a.icon({iconUrl:"img/bus_above_active.png",iconSize:[16,32],iconAnchor:[8,16]}),v.a.icon({iconUrl:"img/bus_above_active.png",iconSize:[32,64],iconAnchor:[16,32]})),T=(v.a.icon({iconUrl:"img/bus_above_active.png",iconSize:[64,128],iconAnchor:[32,64]}),v.a.icon({iconUrl:"img/train_above.png",iconSize:[16,32],iconAnchor:[8,16]}),v.a.icon({iconUrl:"img/train_above.png",iconSize:[32,64],iconAnchor:[16,32]})),_=(v.a.icon({iconUrl:"img/train_above.png",iconSize:[64,128],iconAnchor:[32,64]}),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).vehicleIcon=x,n.busIcon=S,n.trainIcon=T,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=[];if(this.props.taxi){var t=this.props.store.getVehicle(0);Object.keys(t).forEach(function(n){e.push(i.a.createElement(N,{position:[t[n][0][0],t[n][0][1]],icon:x,rotationOrigin:x.options.iconAnchor[0]+"px "+x.options.iconAnchor[1]+"px",rotationAngle:[t[n][0][2]]}))})}if(this.props.bus){var n=this.props.store.getVehicle(3);Object.keys(n).forEach(function(t){e.push(i.a.createElement(N,{position:[n[t][0][0],n[t][0][1]],icon:S,rotationOrigin:S.options.iconAnchor[0]+"px "+S.options.iconAnchor[1]+"px",rotationAngle:[n[t][0][2]]}))})}if(this.props.busTrace){var a=this.props.store.getVehicle(3);Object.keys(a).forEach(function(t){var n=a[t],o=[];n.forEach(function(e){o.push([e[0],e[1]])}),e.push(i.a.createElement(E.a,{positions:o}))})}if(this.props.train){var o=this.props.store.getVehicle(2);Object.keys(o).forEach(function(t){e.push(i.a.createElement(N,{position:[o[t][0][0],o[t][0][1]],icon:T,rotationOrigin:T.options.iconAnchor[0]+"px "+T.options.iconAnchor[1]+"px",rotationAngle:[o[t][0][2]]}))})}var s=i.a.createElement("div",null);e.length>0&&(s=e);var r=i.a.createElement(O.a,{center:[34.8594,137.172],zoom:13},i.a.createElement(y.a,{url:"https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),s);return i.a.createElement("section",{className:"content"},r)}}]),t}(a.Component)),R=n(90),V=n.n(R),M=function(e){function t(e){var n;Object(r.a)(this,t),n=Object(l.a)(this,Object(u.a)(t).call(this,e));var a=V()();return n.mstore=new b,n.state={store:n.mstore,bus:!0,busTrace:!0,taxi:!0,train:!0},a.on("connect",function(){console.log("Socket.IO Connected!")}),a.on("event",n.getEvent.bind(Object(p.a)(Object(p.a)(n)))),a.on("disconnect",function(){console.log("Socket.IO Disconnected!")}),n.selComp=_,n.selArg={store:n.state.store,bus:n.state.bus,busTrace:n.state.busTrace,taxi:n.state.taxi,train:n.state.train},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"getEvent",value:function(e){this.mstore.addPosition(e),this.setState({store:this.mstore})}},{key:"resetView",value:function(){this.setState({reset:!0}),this.selArg.reset=!0}},{key:"showBus",value:function(){this.setState({bus:!this.state.bus}),this.selArg.bus=this.state.bus}},{key:"showBusTrace",value:function(){this.setState({busTrace:!this.state.busTrace}),this.selArg.busTrace=this.state.busTrace}},{key:"showTaxi",value:function(){this.setState({taxi:!this.state.taxi}),this.selArg.taxi=this.state.taxi}},{key:"showTrain",value:function(){this.selArg.train=!this.state.train,this.setState({train:this.selArg.train})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=i.a.createElement(m,null),n=i.a.createElement(g,{component:this.selComp,args:this.selArg}),a=i.a.createElement(f,{clearLogs:function(){return e.clearLogs()},showBus:function(){return e.showBus()},showBusTrace:function(){return e.showBusTrace()},showTaxi:function(){return e.showTaxi()},showTrain:function(){return e.showTrain()},resetView:function(){return e.resetView()}});return i.a.createElement("div",null,t,a,n)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},93:function(e,t,n){e.exports=n(128)},98:function(e,t,n){}},[[93,2,1]]]);
//# sourceMappingURL=main.9037cd20.chunk.js.map